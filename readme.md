   # åŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶æ”¹è¿› ResNet18 çš„å›¾åƒåˆ†ç±»ä¸å¯è§†åŒ–ç³»ç»Ÿ

   ## 1. é¡¹ç›®ç®€ä»‹ (Introduction)
   æœ¬é¡¹ç›®æ—¨åœ¨æ¢ç©¶**è‡ªæ³¨æ„åŠ›æœºåˆ¶ (Self-Attention)** å¯¹ä¼ ç»Ÿå·ç§¯ç¥ç»ç½‘ç»œ (CNN) çš„æ€§èƒ½ä¼˜åŒ–ä¸å¯è§£é‡Šæ€§å¢å¼ºã€‚é¡¹ç›®å®Œå…¨ä»é›¶æ„å»ºï¼Œä»¥ **ResNet18** ä¸ºåŸºå‡†æ¨¡å‹ï¼Œé€šè¿‡åœ¨æ·±å±‚ç½‘ç»œåµŒå…¥**å¤šå¤´è‡ªæ³¨æ„åŠ›æ¨¡å— (MHSA)**ï¼Œè§£å†³äº† CNN æ„Ÿå—é‡å—é™çš„é—®é¢˜ã€‚

   å®éªŒæ¶µç›–ä¸¤ä¸ªä¸åŒéš¾åº¦çš„ä»»åŠ¡ï¼š
   1.  **çŒ«ç‹—äºŒåˆ†ç±» (Cat-Dog)**ï¼šç”¨äºéªŒè¯æ¨¡å‹æ”¶æ•›æ€§åŠå¯è§†åŒ–æ•ˆæœã€‚
   2.  **CUB-200 é¸Ÿç±»ç»†ç²’åº¦åˆ†ç±»**ï¼šç”¨äºéªŒè¯æ¨¡å‹åœ¨å¤æ‚èƒŒæ™¯ä¸‹å¯¹å¾®ç»†ç‰¹å¾ï¼ˆå¦‚å–™ã€çº¹ç†ï¼‰çš„æ•æ‰èƒ½åŠ›ã€‚

   ---

   ## 2. ğŸ“‚ å®éªŒç»“æœä¸è¾“å‡ºè¯´æ˜ (Key Outputs)

   **è¿™æ˜¯æœ¬é¡¹ç›®æœ€æ ¸å¿ƒçš„äº§å‡ºéƒ¨åˆ†ï¼Œæ‰€æœ‰è¿è¡Œç»“æœå‡æŒ‰ç»“æ„åŒ–å­˜å‚¨ã€‚**

   ### 2.1 è®­ç»ƒé˜¶æ®µç»“æœ (`outputs/`)
   è¿è¡Œ `main.py` è®­ç»ƒåï¼Œç»“æœå°†è‡ªåŠ¨ä¿å­˜åœ¨ä»¥ä¸‹ä½ç½®ï¼š

   | ç›®å½•è·¯å¾„                                   | æ–‡ä»¶å                      | å†…å®¹è¯´æ˜                                                     |
   | :----------------------------------------- | :-------------------------- | :----------------------------------------------------------- |
   | **`outputs/checkpoints/`**                 | `*.pth`                     | **æ¨¡å‹æƒé‡**ã€‚ä¿å­˜äº†éªŒè¯é›†å‡†ç¡®ç‡æœ€é«˜çš„æ¨¡å‹å‚æ•°ï¼ˆå¦‚ `cub200_attention.pth`ï¼‰ã€‚ |
   | **`outputs/visualizations/`**              | `training_curves.png`       | **è®­ç»ƒæ›²çº¿å›¾**ã€‚åŒ…å« Lossï¼ˆæŸå¤±ï¼‰å’Œ Accuracyï¼ˆå‡†ç¡®ç‡ï¼‰éš Epoch å˜åŒ–çš„æŠ˜çº¿å›¾ã€‚ |
   |                                            | `confusion_matrix.png`      | **æ··æ·†çŸ©é˜µçƒ­åŠ›å›¾**ã€‚å±•ç¤ºæ¨¡å‹åœ¨å„ç±»åˆ«ä¸Šçš„è¯¯åˆ¤æƒ…å†µã€‚           |
   |                                            | `classification_report.txt` | **è¯¦ç»†è¯„ä¼°æŠ¥å‘Š**ã€‚åŒ…å«æ¯ä¸€ç±»çš„ Precision, Recall, F1-Score æŒ‡æ ‡ã€‚ |
   | **`outputs/visualizations/kqv_analysis/`** | `training_æ—¶é—´æˆ³/`          | **KQV æ¼”å˜çƒ­åŠ›å›¾**ã€‚è®°å½•äº†æ¨¡å‹ä» **Epoch 1 åˆ° Epoch N** å¯¹åŒä¸€å¼ æµ‹è¯•å›¾å…³æ³¨ç‚¹çš„å˜åŒ–è¿‡ç¨‹ï¼ˆä»å¼¥æ•£åˆ°èšç„¦ï¼‰ã€‚ |
   | **`outputs/logs/`**                        | `events.out.tfevents...`    | **TensorBoard æ—¥å¿—**ã€‚ç”¨äºåœ¨ TensorBoard ä¸­æŸ¥çœ‹è®­ç»ƒåŠ¨æ€ã€‚    |

   ### 2.2 Demo æ¼”ç¤ºé˜¶æ®µç»“æœ (`Demo/.../result/`)
   è¿è¡Œ `Demo` ç›®å½•ä¸‹çš„é¢„æµ‹è„šæœ¬åï¼Œç»“æœå°†ä¿å­˜åœ¨å¯¹åº”çš„ `result` æ–‡ä»¶å¤¹ä¸­ï¼š

   | ç›®å½•è·¯å¾„                   | å­æ–‡ä»¶å¤¹     | å†…å®¹è¯´æ˜                                                     |
   | :------------------------- | :----------- | :----------------------------------------------------------- |
   | **`Demo/cat_dog/result/`** | `baseline/`  | **åŸºå‡†æ¨¡å‹æŠ¥å‘Š**ã€‚åŒ…å« `report_baseline.txt`ï¼Œè®°å½•æ¯å¼ å›¾çš„é¢„æµ‹ç»“æœä¸ç½®ä¿¡åº¦ã€‚ |
   |                            | `attention/` | **æ”¹è¿›æ¨¡å‹æŠ¥å‘Š**ã€‚åŒ…å« `report_attention.txt` åŠ **`heatmaps/`** æ–‡ä»¶å¤¹ï¼ˆæ¯å¼ æµ‹è¯•å›¾çš„æ³¨æ„åŠ›çƒ­åŠ›å›¾ï¼‰ã€‚ |
   | **`Demo/cub200/result/`**  | `baseline/`  | **åŸºå‡†æ¨¡å‹æŠ¥å‘Š**ã€‚`report_baseline.txt`ï¼ŒåŒ…å« Top-1 å’Œ Top-5 é¢„æµ‹æ¦‚ç‡ã€‚ |
   |                            | `attention/` | **æ”¹è¿›æ¨¡å‹æŠ¥å‘Š**ã€‚`report_attention.txt` åŠ **`heatmaps/`** æ–‡ä»¶å¤¹ï¼ˆå«çº¢è“çƒ­åŠ›å›¾ï¼Œå±•ç¤ºé¸Ÿå–™/çœ¼ç›ç­‰é«˜å“åº”åŒºï¼‰ã€‚ |

   ---

   ## 3. é¡¹ç›®ç›®å½•ç»“æ„ (Project Structure)

   ```text
   AI_Final_Project/
   â”œâ”€â”€ main.py                    # [ä¸»ç¨‹åº] ç»Ÿä¸€æ§åˆ¶è®­ç»ƒã€è¯„ä¼°ä¸åˆ†æçš„å…¥å£
   â”œâ”€â”€ prepare_data.py            # [æ•°æ®è„šæœ¬] åŸå§‹æ•°æ®æ¸…æ´—ã€åˆ’åˆ†ä¸æ ¼å¼åŒ–
   â”œâ”€â”€ requirements.txt           # [ä¾èµ–æ–‡ä»¶] é¡¹ç›®è¿è¡Œæ‰€éœ€çš„ Python åº“
   â”‚
   â”œâ”€â”€ src/                       # [æºä»£ç æ ¸å¿ƒå±‚]
   â”‚   â”œâ”€â”€ dataset.py             # æ•°æ®é›†åŠ è½½ (å« RobustImageFolder é˜²æŠ¥é”™æœºåˆ¶)
   â”‚   â”œâ”€â”€ model.py               # å®šä¹‰ ResNet18_Baseline åŠ ResNet18_With_Attention
   â”‚   â”œâ”€â”€ train.py               # è®­ç»ƒå¾ªç¯ã€éªŒè¯é€»è¾‘ã€Checkpoint ä¿å­˜åŠå¯è§†åŒ–è°ƒç”¨
   â”‚   â”œâ”€â”€ analyze_kqv.py         # KQV çƒ­åŠ›å›¾ç”Ÿæˆä¸å åŠ ç®—æ³•æ ¸å¿ƒ
   â”‚   â””â”€â”€ utils.py               # ç»˜å›¾å·¥å…· (Lossæ›²çº¿ã€æ··æ·†çŸ©é˜µã€åˆ†ç±»æŠ¥å‘Š)
   â”‚
   â”œâ”€â”€ Demo/                      # [æ¼”ç¤ºæ¨¡å—] ç‹¬ç«‹çš„åº”ç”¨æ¨ç†æ¨¡å—
   â”‚   â”œâ”€â”€ cat_dog/
   â”‚   â”‚   â”œâ”€â”€ predict_cat_dog.py # çŒ«ç‹—é¢„æµ‹è„šæœ¬
   â”‚   â”‚   â”œâ”€â”€ Data/              # æµ‹è¯•æ•°æ® (éœ€æ‰‹åŠ¨æ”¾å…¥ Cat/Dog/unknown)
   â”‚   â”‚   â””â”€â”€ result/            # [è¾“å‡º] å­˜æ”¾é¢„æµ‹æŠ¥å‘Šå’Œçƒ­åŠ›å›¾
   â”‚   â””â”€â”€ cub200/
   â”‚       â”œâ”€â”€ predict_birds.py   # é¸Ÿç±»é¢„æµ‹è„šæœ¬
   â”‚       â”œâ”€â”€ Data/              # æµ‹è¯•æ•°æ® (éœ€æ‰‹åŠ¨æ”¾å…¥ 000.unknown æˆ– å…·ä½“é¸Ÿç±»æ–‡ä»¶å¤¹)
   â”‚       â””â”€â”€ result/            # [è¾“å‡º] å­˜æ”¾é¢„æµ‹æŠ¥å‘Šå’Œçƒ­åŠ›å›¾
   â”‚
   â”œâ”€â”€ data/                      # [æ ‡å‡†æ•°æ®] prepare_data.py ç”Ÿæˆçš„è®­ç»ƒ/éªŒè¯é›†
   â”œâ”€â”€ raw_data/                  # [åŸå§‹æ•°æ®] ä¸‹è½½çš„åŸå§‹å‹ç¼©åŒ…è§£å‹ä½ç½®
   â””â”€â”€ outputs/                   # [å®éªŒæ€»è¾“å‡º] åŒ…å«æƒé‡ã€æ—¥å¿—ã€è®­ç»ƒæ›²çº¿ã€KQVåˆ†æå›¾
   ```

   ---

   ## 4. å¿«é€Ÿå¼€å§‹ (Quick Start)

   ### 4.1 ç¯å¢ƒæ­å»º
   ```bash
   pip install -r requirements.txt
   ```

   ### 4.2 æ•°æ®å‡†å¤‡

   1. ä¸‹è½½åŸå§‹æ•°æ®é›†ï¼ŒçŒ«ç‹—æ•°æ®é›†ä¸ºå®éªŒæŒ‡å¯¼æ‰€ç»™çš„æ•°æ®é›†ï¼Œcub_200æ•°æ®é›†æ˜¯åœ¨Kaggleä¸­ä¸‹è½½ï¼Œä¸‹è½½ç½‘å€ä¸ºï¼š
   
      ```
      https://www.kaggle.com/datasets/veeralakrishna/200-bird-species-with-11788-images?phase=FinishSSORegistration&returnUrl=%2Fdatasets%2Fveeralakrishna%2F200-bird-species-with-11788-images%2Fversions%2F1%3Fresource%3Ddownload&SSORegistrationToken=CfDJ8MM2ZkWST_dHsDXj-CCe3EOQjiDdX2ZrNrFpDe4eg8PkNBTWVHRKb8bXGy9Las9mqucwBYZ5YMMJ-8G6hc8ZjDendOq4FHn4bKQkVRcFEivoVPaTrpbWZFsp5GbDIjng4DdITn0M5RS2pmw8uUCsLQJpef6DnsTVNvbvsmZVRLtClx7j5wGTTwNSTzZXEv6XTXzhbJgGKlE_XsybccI1nGPYt1_UI5dTJQMYfGVhoU9y8wHPw_zely_4uyoW1Rdy3aiCVyB0OF4tmbapRriqdb3thKIrbzbVE-JzbIRUHh-teH1okqZYeh5wlC-omz-iH7x2WZIApym87P_q1VWs_hTDUg&DisplayName=ling+xuan
      ```
   
   2. å°†åŸå§‹æ•°æ®é›†è§£å‹è‡³ `raw_data` åï¼Œä¿®æ”¹æ¸…æ´—è„šæœ¬prepare_dataä¸­çš„æ–‡ä»¶å¤¹åç§°ï¼Œä¸è§£å‹æ–‡ä»¶å¤¹çš„åç§°ä¸€è‡´ã€‚åŸprepare_data.pyä¸­çš„æ•°æ®é›†åç§°åˆ†åˆ«ä¸ºcat_dogä¸cub_200.

   3. è¿è¡Œæ¸…æ´—è„šæœ¬ï¼š
   
   ```bash
   python prepare_data.py
   ```
   
   ### 4.3 æ¨¡å‹è®­ç»ƒ (Training)
   ä½¿ç”¨ `main.py` è¿›è¡Œè®­ç»ƒï¼Œç¨‹åºä¼šè‡ªåŠ¨ç”Ÿæˆä¸Šè¿°æåˆ°çš„æ‰€æœ‰ç»“æœæ–‡ä»¶ã€‚
   
   **ä»»åŠ¡ä¸€ï¼šçŒ«ç‹—åˆ†ç±» (ResNet18 + Attention)**
   ```bash
   python main.py --dataset cat_dog --model attention --epochs 5 --batch_size 32
   ```
   
   **ä»»åŠ¡äºŒï¼šé¸Ÿç±»ç»†ç²’åº¦åˆ†ç±» (ResNet18 Baseline)**
   ```bash
   python main.py --dataset cub200 --model baseline --epochs 20 --batch_size 16
   ```
   
   **ä»»åŠ¡ä¸‰ï¼šé¸Ÿç±»ç»†ç²’åº¦åˆ†ç±» (ResNet18 + Attention)**
   *è¿™æ˜¯æ ¸å¿ƒå®éªŒï¼Œå°†ç”Ÿæˆ KQV æ¼”å˜å›¾ã€‚*
   ```bash
   python main.py --dataset cub200 --model attention --epochs 20 --batch_size 16 --lr 0.001
   ```
   
   ---
   
   ## 5. Demo æ¨¡å—ä½¿ç”¨æŒ‡å—
   
   Demo æ¨¡å—ç”¨äºæ¨¡æ‹ŸçœŸå®åœºæ™¯ä¸‹çš„é¢„æµ‹ï¼Œ**å®ƒä¼šè‡ªåŠ¨å¯¹æ¯”åŒæ¨¡å‹å¹¶åœ¨ `result` ç›®å½•ä¸‹ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š**ã€‚
   
   ### 5.1 å‡†å¤‡å›¾ç‰‡
   *   å°†çŒ«ç‹—æµ‹è¯•å›¾æ”¾å…¥ `Demo/cat_dog/Data/` ä¸‹çš„ `Cat`, `Dog` æˆ– `unknown` æ–‡ä»¶å¤¹ã€‚
   *   å°†é¸Ÿç±»æµ‹è¯•å›¾æ”¾å…¥ `Demo/cub200/Data/` ä¸‹çš„ `000.unknown` æˆ–å…·ä½“ç±»åˆ«æ–‡ä»¶å¤¹ã€‚
   
   ### 5.2 è¿è¡Œé¢„æµ‹
   ```bash
   # è¿è¡ŒçŒ«ç‹—é¢„æµ‹
   cd Demo/cat_dog
   python predict_cat_dog.py
   
   # è¿è¡Œé¸Ÿç±»é¢„æµ‹
   cd ../cub200
   python predict_birds.py
   ```

   ### 5.3 æŸ¥çœ‹ç»“æœ
   è¿è¡Œç»“æŸåï¼Œè¯·è¿›å…¥ `Demo/xxx/result/attention/heatmaps/` æŸ¥çœ‹ç”Ÿæˆçš„å›¾ç‰‡ã€‚
   *   **çº¢è‰²åŒºåŸŸ**ä»£è¡¨æ¨¡å‹é«˜åº¦å…³æ³¨çš„åŒºåŸŸï¼ˆKey Factorsï¼‰ã€‚
   *   **è“è‰²åŒºåŸŸ**ä»£è¡¨æ¨¡å‹å¿½ç•¥çš„èƒŒæ™¯å™ªå£°ã€‚
   
   ---
   
   ## 6. é™„å½•ï¼šå¸¸ç”¨æŒ‡ä»¤å‚æ•°
   
   | å‚æ•°           | é»˜è®¤å€¼     | è¯´æ˜                                 |
   | :------------- | :--------- | :----------------------------------- |
   | `--dataset`    | `cat_dog`  | é€‰æ‹©æ•°æ®é›† (`cat_dog`, `cub200`)     |
   | `--model`      | `baseline` | é€‰æ‹©æ¨¡å‹ (`baseline`, `attention`)   |
   | `--epochs`     | `10`       | è®­ç»ƒè½®æ•°                             |
   | `--batch_size` | `32`       | æ‰¹å¤„ç†å¤§å° (Windowsé‡æŠ¥é”™è¯·è®¾ä¸º8æˆ–4) |
   | `--lr`         | `0.001`    | åˆå§‹å­¦ä¹ ç‡                           |